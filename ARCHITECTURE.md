# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Digital Dress Code

## üéØ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç

**–ó–∞–º–µ–Ω–∞ —Ñ–æ–Ω–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –≤–∏–¥–µ–æ–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–π** - –≤—Å–µ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ, –±–µ–∑ –±—ç–∫–µ–Ω–¥–∞.
ML –º–æ–¥–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –¥–∞–Ω–Ω—ã–µ –Ω–µ —É—Ö–æ–¥—è—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

---

## üèóÔ∏è –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     Vue 3 Application                       ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ              Main Thread (UI)                         ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ VideoCanvas ‚îÇ‚Üí ‚îÇ useBackground‚îÇ‚Üí ‚îÇ  Stats/UI   ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  Component  ‚îÇ  ‚îÇ  Replacement ‚îÇ  ‚îÇ  Components ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ         ‚Üì                ‚Üì                             ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ            ‚Üì                ‚Üì                                ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ              Web Worker Thread                      ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ         rvm.worker.js                        ‚îÇ   ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ   ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ ONNX Runtime   ‚îÇ‚Üí ‚îÇ  RVM Model       ‚îÇ   ‚îÇ   ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ (WASM)         ‚îÇ  ‚îÇ  MobileNetV3     ‚îÇ   ‚îÇ   ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ   ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

             ‚Üì Camera Input                    ‚Üë Output Canvas
        [WebRTC getUserMedia]            [Canvas 2D Rendering]
```

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ VideoCanvas.vue          # –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å –≤–∏–¥–µ–æ
‚îÇ   ‚îú‚îÄ‚îÄ FullInterface.vue        # –ü–æ–ª–Ω—ã–π UI —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ PresentationMode.vue     # –†–µ–∂–∏–º –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ StatsPanel.vue           # –ü–∞–Ω–µ–ª—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (FPS, CPU, GPU)
‚îÇ   ‚îî‚îÄ‚îÄ UserInfo.vue             # –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ
‚îú‚îÄ‚îÄ composables/
‚îÇ   ‚îî‚îÄ‚îÄ useBackgroundReplacement.js  # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ (350 —Å—Ç—Ä–æ–∫)
‚îÇ
‚îú‚îÄ‚îÄ workers/
‚îÇ   ‚îî‚îÄ‚îÄ rvm.worker.js            # ML –º–æ–¥–µ–ª—å –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ (140 —Å—Ç—Ä–æ–∫)
‚îÇ
‚îú‚îÄ‚îÄ App.vue                      # –ö–æ—Ä–Ω–µ–≤–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
‚îî‚îÄ‚îÄ main.js                      # Entry point

public/
‚îî‚îÄ‚îÄ models/
    ‚îî‚îÄ‚îÄ rvm_mobilenetv3_fp32.onnx  # ML –º–æ–¥–µ–ª—å (44 MB)
```

---

## üîÑ Pipeline –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–∞–¥—Ä–∞

### 1. –ó–∞—Ö–≤–∞—Ç –≤–∏–¥–µ–æ (VideoCanvas.vue)
```javascript
// WebRTC API –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ
stream = await navigator.mediaDevices.getUserMedia({
  video: { width: 1280, height: 720 }
});
sourceVideo.srcObject = stream;
```

### 2. –¶–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏ (requestAnimationFrame)
```javascript
const processLoop = () => {
  processFrame();  // –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–¥—Ä
  requestAnimationFrame(processLoop);  // –°–ª–µ–¥—É—é—â–∏–π –∫–∞–¥—Ä
};
```

### 3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è: –ø—Ä–æ–ø—É—Å–∫ –∫–∞–¥—Ä–æ–≤
```javascript
// –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –∫–∞–∂–¥—ã–π N-–π –∫–∞–¥—Ä (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
frameSkipCounter++;
if (frameSkipCounter % PROCESS_EVERY_N_FRAMES !== 0) {
  // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–µ–¥—ã–¥—É—â—É—é –º–∞—Å–∫—É
  renderMaskToCanvas(lastProcessedMask);
  return;
}
```

### 4. Downsampling –¥–ª—è –º–æ–¥–µ–ª–∏
```javascript
// 1280x720 ‚Üí 480xH –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –º–æ–¥–µ–ª–∏
const { w, h } = calcScaledSize(videoWidth, videoHeight, 480);
const offscreen = new OffscreenCanvas(w, h);
offscreen.drawImage(video, 0, 0, w, h);
```

### 5. –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Worker
```javascript
const bitmap = offscreen.transferToImageBitmap();
worker.postMessage({ type: "run", bitmap }, [bitmap]);
// Transferable Objects = zero-copy, –±—ã—Å—Ç—Ä–æ
```

### 6. ML –º–æ–¥–µ–ª—å –≤ Worker (rvm.worker.js)
```javascript
// –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ —Ç–µ–Ω–∑–æ—Ä
const tensorData = new Float32Array(1 * 3 * height * width);
for (let i = 0; i < height * width; i++) {
  tensorData[rOffset++] = pixels[i * 4] / 255.0;      // R
  tensorData[gOffset++] = pixels[i * 4 + 1] / 255.0;  // G
  tensorData[bOffset++] = pixels[i * 4 + 2] / 255.0;  // B
}

// –ó–∞–ø—É—Å–∫ –º–æ–¥–µ–ª–∏
const outputs = await session.run({
  src: srcTensor,
  downsample_ratio: 0.25,
  r1i, r2i, r3i, r4i  // Temporal states –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
});

// –†–µ–∑—É–ª—å—Ç–∞—Ç: –º–∞—Å–∫–∞ (float32, 0.0=—Ñ–æ–Ω, 1.0=—á–µ–ª–æ–≤–µ–∫)
const pha = outputs.pha;  // –†–∞–∑–º–µ—Ä: 1 √ó 1 √ó H √ó W
```

**RVM –º–æ–¥–µ–ª—å:**
- **Robust Video Matting** - recurrent –Ω–µ–π—Ä–æ–Ω–∫–∞ –¥–ª—è –≤–∏–¥–µ–æ
- **r1-r4 states** - –ø–∞–º—è—Ç—å –º–µ–∂–¥—É –∫–∞–¥—Ä–∞–º–∏ (—É–±–∏—Ä–∞–µ—Ç –¥—Ä–æ–∂–∞–Ω–∏–µ –º–∞—Å–∫–∏)
- **Downsampling ratio** - –º–æ–¥–µ–ª—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç 1/4 —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ —Å–µ–±—è

### 7. –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ Main Thread
```javascript
self.postMessage(
  { type: "result", pha: pha.data, shape: pha.dims, timeMs },
  [pha.data.buffer]  // Transferable
);
```

### 8. –ö–æ–º–ø–æ–∑–∏—Ç–∏–Ω–≥ (renderMaskToCanvas + applyBackground)
```javascript
// –°–æ–∑–¥–∞–µ–º –º–∞—Å–∫—É –∫–∞–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
const maskCanvas = document.createElement("canvas");
const imageData = maskCtx.createImageData(w, h);
for (let i = 0; i < w * h; i++) {
  const alpha = Math.round(pha[i] * 255);
  data[i * 4] = alpha;      // –í—Å–µ –∫–∞–Ω–∞–ª—ã = alpha
  data[i * 4 + 1] = alpha;
  data[i * 4 + 2] = alpha;
  data[i * 4 + 3] = 255;
}

// 1. –ß–∏—Ç–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –≤–∏–¥–µ–æ
const videoData = ctx.getImageData(0, 0, width, height);

// 2. –°–æ–∑–¥–∞–µ–º —Ñ–æ–Ω (blur –∏–ª–∏ —Ü–≤–µ—Ç)
if (bgType === "blur") {
  ctx.filter = `blur(15px)`;
  ctx.drawImage(sourceVideo, 0, 0);
}

// 3. –ü–æ–ø–∏–∫—Å–µ–ª—å–Ω–æ–µ —Å–º–µ—à–∏–≤–∞–Ω–∏–µ
for (let i = 0; i < width * height; i++) {
  const alpha = maskData[i] / 255;
  result[i] = video[i] * alpha + background[i] * (1 - alpha);
}
```

### 9. –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –Ω–∞ —ç–∫—Ä–∞–Ω
```javascript
ctx.putImageData(resultData, 0, 0);
// Canvas –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
```

---

## ‚ö° –í—Ä–µ–º–µ–Ω–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ –æ–¥–Ω–æ–≥–æ –∫–∞–¥—Ä–∞

```
–í—Ä–µ–º—è (ms)    –û–ø–µ—Ä–∞—Ü–∏—è                    –ì–¥–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
0             –ó–∞—Ö–≤–∞—Ç –∫–∞–¥—Ä–∞                Main Thread
1             Downsample 720p‚Üí480p        Main Thread (OffscreenCanvas)
3             –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Worker           Main Thread ‚Üí Worker
              ‚îÄ‚îÄ‚îÄ Worker –Ω–∞—á–∏–Ω–∞–µ—Ç ‚îÄ‚îÄ‚îÄ
3             –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ —Ç–µ–Ω–∑–æ—Ä     Web Worker
8             ML inference (ONNX)         Web Worker (WASM/CPU)
88            –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞          Worker ‚Üí Main Thread
              ‚îÄ‚îÄ‚îÄ Main Thread ‚îÄ‚îÄ‚îÄ
88            –°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Å–∫–∏              Main Thread
93            –ö–æ–º–ø–æ–∑–∏—Ç–∏–Ω–≥ (–ø–æ–ø–∏–∫—Å–µ–ª—å–Ω–æ)   Main Thread (CPU)
123           –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –Ω–∞ canvas         Main Thread (GPU)
125           –ö–ê–î–† –ì–û–¢–û–í ‚úÖ              
              (~8 FPS –µ—Å–ª–∏ –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä)
```

**–° –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏ (–∫–∞–∂–¥—ã–π 2-–π –∫–∞–¥—Ä):**
- –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –∫–∞–¥—Ä: 125ms
- –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–π –∫–∞–¥—Ä: ~5ms (–∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞—Ä—É—é –º–∞—Å–∫—É)
- **–°—Ä–µ–¥–Ω–∏–π FPS: ~25-30** ‚úÖ

---

## üêõ –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ú–æ–¥–µ–ª—å –º–µ–¥–ª–µ–Ω–Ω–∞—è (80-100ms)
**–ü—Ä–∏—á–∏–Ω–∞:** RVM - —Ç—è–∂–µ–ª–∞—è –º–æ–¥–µ–ª—å, CPU —á–µ—Ä–µ–∑ WASM

**–†–µ—à–µ–Ω–∏—è:**
- ‚úÖ Downsampling: 720p ‚Üí 480p –¥–ª—è –º–æ–¥–µ–ª–∏ (3x –±—ã—Å—Ç—Ä–µ–µ)
- ‚úÖ –ü—Ä–æ–ø—É—Å–∫ –∫–∞–¥—Ä–æ–≤: –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∂–¥—ã–π 2-–π (2x –±—ã—Å—Ç—Ä–µ–µ)
- ‚è≥ WebGL backend (–Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω, –Ω—É–∂–Ω—ã –ª–æ–∫–∞–ª—å–Ω—ã–µ WASM —Ñ–∞–π–ª—ã)
- ‚è≥ –ö–≤–∞–Ω—Ç–∏–∑–∞—Ü–∏—è FP16 (–Ω—É–∂–Ω–∞ –¥—Ä—É–≥–∞—è –º–æ–¥–µ–ª—å)

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ö–æ–º–ø–æ–∑–∏—Ç–∏–Ω–≥ –∂—Ä–µ—Ç –ø–∞–º—è—Ç—å –∏ CPU (30-50ms) üî•
**–ü—Ä–∏—á–∏–Ω–∞:** –ü–æ–ø–∏–∫—Å–µ–ª—å–Ω—ã–π —Ü–∏–∫–ª –≤ JavaScript

```javascript
// 921,600 –∏—Ç–µ—Ä–∞—Ü–∏–π –¥–ª—è 720p
// 3.7 –º–ª–Ω –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞ –∫–∞–¥—Ä
// 30 FPS = 111 –º–ª–Ω –æ–ø–µ—Ä–∞—Ü–∏–π/—Å–µ–∫ –≤ JS üíÄ
for (let i = 0; i < 921600; i++) {
  result[i] = video[i] * alpha + bg[i] * (1 - alpha);
}
```

**–ü—Ä–æ–±–ª–µ–º–∞ —Å –ø–∞–º—è—Ç—å—é:**
- 3 –º–∞—Å—Å–∏–≤–∞ –ø–æ 3.7 –ú–ë (video, background, result)
- –ö–∞–∂–¥—ã–π –∫–∞–¥—Ä —Å–æ–∑–¥–∞–≤–∞–ª –Ω–æ–≤—ã–π canvas
- 30 FPS √ó 11 –ú–ë = 330 –ú–ë/—Å–µ–∫ –∞–ª–ª–æ–∫–∞—Ü–∏–π
- **Garbage Collector –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª –ø–æ—Ç–æ–∫ –Ω–∞ 10-20ms** üíÄ

**–†–µ—à–µ–Ω–∏—è:**
- ‚úÖ –ü—Ä–æ–ø—É—Å–∫ –∫–∞–¥—Ä–æ–≤ (—É–º–µ–Ω—å—à–∏–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–∑–æ–≤–æ–≤ –≤ 2 —Ä–∞–∑–∞)
- ‚úÖ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–∞—Å–∫–∏ (–º–µ–Ω—å—à–µ –∞–ª–ª–æ–∫–∞—Ü–∏–π)
- ‚è≥ WebGL –∫–æ–º–ø–æ–∑–∏—Ç–∏–Ω–≥ (—Å–ª–æ–∂–Ω–æ, —Ç—Ä–µ–±—É–µ—Ç —à–µ–π–¥–µ—Ä–æ–≤)

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –û—á–µ—Ä–µ–¥—å –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∫–∞–¥—Ä–æ–≤
**–ü—Ä–∏—á–∏–Ω–∞:** requestAnimationFrame –∑–∞–ø—É—Å–∫–∞–µ—Ç –±—ã—Å—Ç—Ä–µ–µ —á–µ–º –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
let isProcessing = false;

const processFrame = () => {
  if (isProcessing) return;  // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –µ—Å–ª–∏ –∑–∞–Ω—è—Ç—ã
  isProcessing = true;
  // ... –æ–±—Ä–∞–±–æ—Ç–∫–∞
};
```

---

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Frontend Framework
- **Vue 3** - Composition API –¥–ª—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- **Vite** - –±—ã—Å—Ç—Ä–∞—è —Å–±–æ—Ä–∫–∞, hot reload

### ML & Computer Vision
- **ONNX Runtime Web 1.23.0** - –∑–∞–ø—É—Å–∫ ML –º–æ–¥–µ–ª–µ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ
  - Backend: WASM (CPU)
  - Multithreading: 4 –ø–æ—Ç–æ–∫–∞ (SIMD)
- **RVM MobileNetV3 FP32** - –º–æ–¥–µ–ª—å –¥–ª—è video matting
  - –†–∞–∑–º–µ—Ä: 44 MB
  - –í—Ö–æ–¥: RGB 480√óH + 4 temporal states
  - –í—ã—Ö–æ–¥: Alpha mask + –Ω–æ–≤—ã–µ states

### Browser APIs
- **WebRTC getUserMedia** - –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ
- **Canvas 2D API** - —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∏ –∫–æ–º–ø–æ–∑–∏—Ç–∏–Ω–≥
- **OffscreenCanvas** - —Ä–∞–±–æ—Ç–∞ —Å canvas –±–µ–∑ DOM
- **Web Workers** - –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å –¥–ª—è ML
- **Transferable Objects** - zero-copy –º–µ–∂–¥—É –ø–æ—Ç–æ–∫–∞–º–∏

### Performance Optimizations
- **requestAnimationFrame** - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å refresh rate
- **Frame skipping** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞–∂–¥–æ–≥–æ N-–≥–æ –∫–∞–¥—Ä–∞
- **Frame throttling** - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏
- **Downsampling** - —É–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –¥–ª—è –º–æ–¥–µ–ª–∏

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- **FPS:** 8-12
- **Latency:** 100-120ms
- **CPU:** 100%
- **Memory:** 330 –ú–ë/—Å–µ–∫ –∞–ª–ª–æ–∫–∞—Ü–∏–π

### –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- **FPS:** 25-30
- **Latency:** 60-80ms (—É—Å—Ä–µ–¥–Ω–µ–Ω–Ω—ã–π)
- **CPU:** ~70%
- **Memory:** ~100 –ú–ë/—Å–µ–∫

### Breakdown –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –ó–∞—Ö–≤–∞—Ç + downsample: 2ms
- ML inference: 80-100ms (–æ—Å–Ω–æ–≤–Ω–æ–µ –≤—Ä–µ–º—è)
- –ö–æ–º–ø–æ–∑–∏—Ç–∏–Ω–≥: 20-30ms
- –†–µ–Ω–¥–µ—Ä–∏–Ω–≥: 1-2ms
- **Total –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –∫–∞–¥—Ä:** ~120ms
- **Total –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–π –∫–∞–¥—Ä:** ~5ms

**–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π FPS = 1000ms / ((120ms + 5ms) / 2) ‚âà 16 FPS –±–∞–∑–æ–≤—ã–π + –∫—ç—à –º–∞—Å–∫–∏ ‚âà 25-30 FPS**

---

## üéì –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

### 1. Video Matting
–í—ã–¥–µ–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–Ω–µ–≥–æ –ø–ª–∞–Ω–∞ (—á–µ–ª–æ–≤–µ–∫) –æ—Ç —Ñ–æ–Ω–∞ –≤ –≤–∏–¥–µ–æ.
- –ë–∏–Ω–∞—Ä–Ω–∞—è —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ (—Ä–µ–∑–∫–∏–µ –∫—Ä–∞—è)
- –ù—É–∂–Ω–∞ **alpha matte** - –ø–ª–∞–≤–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è 0-1 –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–∏–∫—Å–µ–ª—è
- **Temporal coherence** - —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –º–µ–∂–¥—É –∫–∞–¥—Ä–∞–º–∏ (—á–µ—Ä–µ–∑ r1-r4 states)

### 2. Web Workers
JavaScript single-threaded, –Ω–æ Web Workers = –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø–æ—Ç–æ–∫–∏.
- ML –º–æ–¥–µ–ª—å –≤ worker = UI –Ω–µ –ª–∞–≥–∞–µ—Ç
- `postMessage` –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
- **Transferable Objects** = zero-copy (–±—ã—Å—Ç—Ä–æ)

### 3. ONNX Runtime
–°—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ ML –º–æ–¥–µ–ª–µ–π –∫—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ.
- –ú–æ–¥–µ–ª–∏ –∏–∑ PyTorch/TensorFlow ‚Üí ONNX
- ONNX Runtime = inference engine
- Backend: WebGL (GPU), WASM (CPU), WebGPU (–±—É–¥—É—â–µ–µ)

### 4. Canvas Compositing
–°–º–µ—à–∏–≤–∞–Ω–∏–µ —Å–ª–æ–µ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.
- **Porter-Duff alpha compositing:** `result = fg * alpha + bg * (1 - alpha)`
- CPU (JavaScript) vs GPU (WebGL/CSS) - —Ä–∞–∑–Ω–∏—Ü–∞ 10x

---

## üöÄ –ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å

### Performance
1. **WebGL –∫–æ–º–ø–æ–∑–∏—Ç–∏–Ω–≥** - —à–µ–π–¥–µ—Ä—ã –≤–º–µ—Å—Ç–æ JS —Ü–∏–∫–ª–∞ (5-10x –±—ã—Å—Ç—Ä–µ–µ)
2. **WebGL backend –¥–ª—è ONNX** - –º–æ–¥–µ–ª—å –Ω–∞ GPU (2-3x –±—ã—Å—Ç—Ä–µ–µ)
3. **FP16 –º–æ–¥–µ–ª—å** - –ø–æ–ª–æ–≤–∏–Ω–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å (2x –±—ã—Å—Ç—Ä–µ–µ, –º–µ–Ω—å—à–µ –ø–∞–º—è—Ç–∏)
4. **Web Workers pool** - –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–∞–¥—Ä–æ–≤
5. **WebGPU** - –Ω–æ–≤—ã–π API –¥–ª—è GPU compute (–∫–æ–≥–¥–∞ –±—Ä–∞—É–∑–µ—Ä—ã –ø–æ–¥–¥–µ—Ä–∂–∞—Ç)

### Quality
1. **Temporal smoothing** - —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ –º–∞—Å–∫–∏ –º–µ–∂–¥—É –∫–∞–¥—Ä–∞–º–∏
2. **Edge refinement** - —É–ª—É—á—à–µ–Ω–∏–µ –∫—Ä–∞–µ–≤ –º–∞—Å–∫–∏ (–≤–æ–ª–æ—Å—ã –∏ —Ç.–¥.)
3. **Adaptive resolution** - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –º–µ–Ω—è—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –ø–æ FPS

### Features
1. **–í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Ñ–æ–Ω—ã** - –∑–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ä—Ç–∏–Ω–æ–∫
2. **Blur –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** - —Å–µ–π—á–∞—Å CSS filter, –º–æ–∂–Ω–æ WebGL
3. **Recording** - –∑–∞–ø–∏—Å—å –≤–∏–¥–µ–æ —Å –∑–∞–º–µ–Ω–µ–Ω–Ω—ã–º —Ñ–æ–Ω–æ–º

---

## üìù –î–ª—è –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏

### Elevator Pitch
"–ó–∞–º–µ–Ω–∞ —Ñ–æ–Ω–∞ –¥–ª—è –≤–∏–¥–µ–æ–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–π, —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤ –±—Ä–∞—É–∑–µ—Ä–µ –±–µ–∑ —Å–µ—Ä–≤–µ—Ä–æ–≤. ML –º–æ–¥–µ–ª—å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤–∏–¥–µ–æ –ª–æ–∫–∞–ª—å–Ω–æ, –¥–∞–Ω–Ω—ã–µ –Ω–µ —É—Ö–æ–¥—è—Ç –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–ª–∏ —Å 10 –¥–æ 30 FPS."

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
1. ‚úÖ ML inference –≤ –±—Ä–∞—É–∑–µ—Ä–µ (ONNX Runtime + WASM)
2. ‚úÖ –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è (25-30 FPS –Ω–∞ —Å—Ä–µ–¥–Ω–∏—Ö –ü–ö)
3. ‚úÖ –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å (–≤—Å–µ –ª–æ–∫–∞–ª—å–Ω–æ, zero server calls)
4. ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏ (–æ—Ç 330 –ú–ë/—Å–µ–∫ –¥–æ 100 –ú–ë/—Å–µ–∫)

### –°—Ç–µ–∫ –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É
**Vue 3 + ONNX Runtime Web + Canvas API + Web Workers + RVM MobileNetV3**

### –°–∞–º–æ–µ —Å–ª–æ–∂–Ω–æ–µ
"–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–∑–∏—Ç–∏–Ω–≥–∞ - –ø–æ–ø–∏–∫—Å–µ–ª—å–Ω—ã–π —Ü–∏–∫–ª –≤ JavaScript –∂—Ä–∞–ª 30-50ms –Ω–∞ –∫–∞–¥—Ä –∏ –∞–ª–ª–æ—Ü–∏—Ä–æ–≤–∞–ª 330 –ú–ë/—Å–µ–∫. –†–µ—à–∏–ª–∏ —á–µ—Ä–µ–∑ –ø—Ä–æ–ø—É—Å–∫ –∫–∞–¥—Ä–æ–≤ –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±—É—Ñ–µ—Ä–æ–≤."

---

**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –¥–µ–º–æ! üöÄ**

